script:
  curtain_control:
    alias: Curtain Control
    sequence:
      - service: cover.set_cover_position
        target:
          entity_id: cover.your_curtain_entity
        data:
          position: "{{ position }}"
      - wait_for_trigger:
          - platform: state
            entity_id: cover.your_curtain_entity
            to: "{{ 'open' if position == 100 else 'closed' if position == 0 else 'open' }}"
        timeout: "00:01:00"
      - service: homeassistant.update_entity
        target:
          entity_id: cover.your_curtain_entity

